<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="default"><meta name=format-detection content="telephone=no"><meta name=theme-color content="#a6d6d6"><meta name=referrer content="no-referrer"><meta name=description content="###关于 Wox
最初是看到 V2EX 上的一个帖子 v2ex.com/t/93922，然后作者真的去写了并且发布在 Github 上了。
Windows 上的快速启动软件已经很多了，但是不管从功能、界面乃至理念来讲和 Alfred 都相去甚远，尤其是 Workflow 的概念。
Wox 现在发布了第一个 beta 版本，看上去已经很不错了，希望这个项目能坚持下去吧。
###Wox.Plugin.FirefoxBookmarks
Wox 的插件开发也比较简单，可以参考文档。写了个搜索 Firefox 书签的插件。
原理是读取 Firefox 书签，然后根据参数查询返回结果。
首先我们要获取到 Firefox Profile 的位置。Firefox 支持多个 Profile，我们可以获取到默认的 Profile 。Firefox Profile 路径及配置都保存在 %appdata%\Mozilla\Firefox\profiles.ini 中。打开这个配置文件可以看到每个 Profile 配置包含的参数：&ldquo;IsRelative&rdquo; 值为 &ldquo;0&rdquo; 代表绝对路径，&ldquo;1&rdquo; 代表相对路径；&ldquo;Default=1&rdquo; 代表默认启动的 Profile。
虽然可以通过引入 WindowsAPI （即 [DllImport(&#34;kernel32&#34;)]）来解析 ini 配置文件，不过无需如此小题大做，毕竟只需要找到其中一行即可。下面是一个读取 Firefox 默认 Profile 的方法：
gist 11324134
这种读取方法对某些 Portable 版本无效，所以同时也提供了手动配置路径的方法。
Firefox 书签以及历史记录都保存在 Profile 里的 places.sqlite 中。其表结构可以参考 developer.mozilla.org/en-US/docs/The_Places_database。
其中 moz_bookmarks 表中存储了书签及书签文件夹，且通过外键 fk 和 moz_places 关联。"><meta name=author content="caoyue"><title>且听疯吟 / A Wox plugin let you search firefox bookmarks</title><link rel=alternate type=application/rss+xml href=/index.xml title=且听疯吟><link rel=apple-touch-icon sizes=192x192 href=https://blog.caoyue.me/favicon.png><link rel=icon type=image/png sizes=48x48 href=https://blog.caoyue.me/favicon.png><link rel=icon type=image/png sizes=192x192 href=https://blog.caoyue.me/favicon.png><link rel=stylesheet type=text/css href=https://blog.caoyue.me/normalize.css><link rel=stylesheet type=text/css href=https://blog.caoyue.me/scss/style.css><link rel=stylesheet type=text/css href=https://blog.caoyue.me/syntax/monokailight.css id=syntax-theme><script type=text/javascript>function syntaxHighlight(){var e=document.querySelector("#syntax-theme");let t="https://blog.caoyue.me/syntax/monokailight.css",n="https://blog.caoyue.me/syntax/dracula.css",s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?n:t;e.href=s}syntaxHighlight(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{syntaxHighlight()})</script><script src=https://kit.fontawesome.com/061cfdc036.js crossorigin=anonymous></script></head><body><div class=wrap><header class=header><a href=/ title=且听疯吟>且听疯吟</a>
<span>如此生活三十年</span></header><div class=left><ul class=list><li><a href=/ title=Home>Home</a></li><li><a href=/tweets title=碎碎念>Tweets</a></li><li><a href=/archives title=Archives>Archives</a></li><li><a href=/tags title=Tags>Tags</a></li></ul></div><div class=right><div class=entry id=cotent><div class=title>A Wox plugin let you search firefox bookmarks</div><div class=content><p>###关于 Wox<br>最初是看到 V2EX 上的一个帖子 <a href=https://v2ex.com/t/93922>v2ex.com/t/93922</a>，然后作者真的去写了并且发布在 Github 上了。<br>Windows 上的快速启动软件已经很多了，但是不管从功能、界面乃至理念来讲和 Alfred 都相去甚远，尤其是 Workflow 的概念。<br>Wox 现在发布了第一个 beta 版本，看上去已经很不错了，希望这个项目能坚持下去吧。</p><p>###Wox.Plugin.FirefoxBookmarks<br>Wox 的插件开发也比较简单，可以参考文档。写了个搜索 Firefox 书签的插件。<br>原理是读取 Firefox 书签，然后根据参数查询返回结果。</p><p>首先我们要获取到 Firefox Profile 的位置。Firefox 支持多个 Profile，我们可以获取到默认的 Profile 。Firefox Profile 路径及配置都保存在 <code>%appdata%\Mozilla\Firefox\profiles.ini</code> 中。打开这个配置文件可以看到每个 Profile 配置包含的参数：&ldquo;IsRelative&rdquo; 值为 &ldquo;0&rdquo; 代表绝对路径，&ldquo;1&rdquo; 代表相对路径；&ldquo;Default=1&rdquo; 代表默认启动的 Profile。<br>虽然可以通过引入 WindowsAPI （即 <code>[DllImport("kernel32")]</code>）来解析 ini 配置文件，不过无需如此小题大做，毕竟只需要找到其中一行即可。下面是一个读取 Firefox 默认 Profile 的方法：</p><p><code>gist 11324134</code></p><p>这种读取方法对某些 Portable 版本无效，所以同时也提供了手动配置路径的方法。</p><p>Firefox 书签以及历史记录都保存在 Profile 里的 places.sqlite 中。其表结构可以参考 <a href=https://developer.mozilla.org/en-US/docs/The_Places_database>developer.mozilla.org/en-US/docs/The_Places_database</a>。<br>其中 moz_bookmarks 表中存储了书签及书签文件夹，且通过外键 fk 和 moz_places 关联。<br>Sqlite 的查询语法基本和标准 SQL 相同，比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>moz_places</span><span class=p>.</span><span class=n>url</span><span class=p>,</span><span class=w> </span><span class=n>moz_bookmarks</span><span class=p>.</span><span class=n>title</span><span class=p>,</span><span class=n>parent</span><span class=p>.</span><span class=n>title</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>parent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>moz_bookmarks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>moz_places</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>moz_places</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>moz_bookmarks</span><span class=p>.</span><span class=n>fk</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>moz_bookmarks</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>parent</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>parent</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>moz_bookmarks</span><span class=p>.</span><span class=n>parent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>moz_bookmarks</span><span class=p>.</span><span class=k>type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span></code></pre></div><p>PS. 另一个快速切换电源计划的插件 <a href=https://github.com/caoyue/Wox.Plugin.PowerPlan>Wox.Plugin.PowerPlan</a></p></div><div class=tags><ul class=info><li>2014-04-25</li><li><a href=https://blog.caoyue.me/tags/project>#project</a></li><li class=button title="show comments" id=toggle-comments><i class="fa-solid fa-message"></i></li></ul></div></div><div class=comments id=comments><section class="article discussion" style=display:none><script>function loadComment(){let t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"photon-dark":"github-light",e=document.createElement("script");e.src="https://utteranc.es/client.js",e.setAttribute("repo","caoyue/caoyue.github.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme",t),e.setAttribute("label","Comment"),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",''),document.querySelector("section.article.discussion").innerHTML='',document.querySelector("section.article.discussion").appendChild(e)}loadComment(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{loadComment()});function toggleComment(){let e=document.querySelector("section.article.discussion");e.style.display=="none"?e.style.display="block":e.style.display="none"}document.querySelector("#toggle-comments").addEventListener("click",toggleComment)</script></section></div></div><footer class=footer><div>©2022 <a href=/>且听疯吟</a>. designed
by <a href=https://caoyue.me target=_blank>caoyue</a>.
powered by <a href=https://gohugo.io/ target=_blank>hugo</a>.
<script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "1a24e73fd4284bfa8b43ecf5a5c2c100"}'></script>
<script defer src=https://use.typekit.net/jdb5cpn.js></script>
<script type=text/javascript>try{Typekit.load({async:!0})}catch(e){}</script></div></footer></div></body></html>