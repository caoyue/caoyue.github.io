<html lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="format-detection" content="telephone=no"/><meta name="theme-color" content="#a6d6d6"/><meta name="msapplication-TileColor" content="#a6d6d6"/><meta name="msapplication-TileImage" content="/icon/favicon.ico"/><meta name="referrer" content="no-referrer"/><title>且听疯吟</title><link rel="alternate" type="application/rss+xml" title="atom 1.0" href="/atom.xml"/><link rel="apple-touch-icon" sizes="192x192" href="/icon/favicon.ico"/><link rel="icon" type="image/png" sizes="48x48" href="/icon/favicon.ico"/><link rel="icon" type="image/png" sizes="192x192" href="/icon/favicon.ico"/><link rel="stylesheet" href="/css/normalize.css"/><link rel="stylesheet" href="/css/style.css"/><meta name="generator" content="Hexo 6.0.0"></head><body><div class="wrap"><div class="header"><a href="/" title="this is a link">且听疯吟</a><span>如此生活三十年</span></div><div class="left"><ul class="list"><li><a href="/" title="Home">Home</a></li><li><a href="/archives" title="archive">Archive</a></li><li><a href="/tags" title="Tags">Tags</a></li></ul></div><div class="right"><div class="entry"><div class="title"><a href="/post/thoughts-about-Microsoft-purchase-of-Activision-Blizzard/">关于微软收购动视暴雪</a></div><div class="content"><p>这是一个初听很震撼，细想好像没什么毛病的收购。<br>不管是作为十多年暴雪全家桶玩家，还是单纯作为随着电子游戏成长起来的一代，或者说即将成为元宇宙的第一波韭菜，各种意义上都算是见证历史了。</p>
<p>感觉几个有意思的点：</p>
<h3 id="🤑-687-亿美元，现金"><a href="#🤑-687-亿美元，现金" class="headerlink" title="🤑 687 亿美元，现金"></a>🤑 687 亿美元，<strong>现金</strong></h3><p>怎么说呢，最近各种新闻也是频繁刷新我对金钱数量的认识了<br><del>恒大：和我的债务比起来就是个弟弟</del></p>
<h3 id="💰-只用了约一半现金储备"><a href="#💰-只用了约一半现金储备" class="headerlink" title="💰 只用了约一半现金储备"></a>💰 只用了约一半现金储备</h3><p>什么叫财大气粗啊~</p>
<h3 id="💸-687-亿美元大约相当于整个网易市值，约是索尼市值的一半"><a href="#💸-687-亿美元大约相当于整个网易市值，约是索尼市值的一半" class="headerlink" title="💸 687 亿美元大约相当于整个网易市值，约是索尼市值的一半"></a>💸 687 亿美元大约相当于整个网易市值，约是索尼市值的一半</h3><p>Phil Spencer 是真的厉害，毕竟能赚钱的人很多，但是能让老板一下子掏出来近 700 亿美刀的人……</p>
<h3 id="🎮-收购完成后，游戏业务微软排到了第三，第一是腾讯，第二是索尼"><a href="#🎮-收购完成后，游戏业务微软排到了第三，第一是腾讯，第二是索尼" class="headerlink" title="🎮 收购完成后，游戏业务微软排到了第三，第一是腾讯，第二是索尼"></a>🎮 收购完成后，游戏业务微软排到了第三，第一是腾讯，第二是索尼</h3><p>玩家：你有什么拿得出手的大作吗？<br>企鹅：啊，没有啊。<br>玩家：你有自己的硬件平台吗？<br>企鹅：啊，没有啊。<br>玩家：你有自己的平台吗？<br>企鹅：啊，没有啊。<br>玩家：那你凭什么第一？<br>企鹅：sorry，会赚钱就是为所欲为。</p>
<h3 id="📈-收购消息传出后，动视暴雪股票暴涨，索尼大跌，任天堂微涨，育碧-EA-双双上扬"><a href="#📈-收购消息传出后，动视暴雪股票暴涨，索尼大跌，任天堂微涨，育碧-EA-双双上扬" class="headerlink" title="📈 收购消息传出后，动视暴雪股票暴涨，索尼大跌，任天堂微涨，育碧 EA 双双上扬"></a>📈 收购消息传出后，动视暴雪股票暴涨，索尼大跌，任天堂微涨，育碧 EA 双双上扬</h3><p>只有索尼受伤的世界达成了~</p>
<h3 id="🤷‍♂️-今夜大量玩家跪在微软门口，他们手上举着“救救魔兽”“救救星际”“救救守望”“风暴要火”……最后只有一位举着“暗黑不朽上线”的玩家被保安拖走了，因为微软没有手机。"><a href="#🤷‍♂️-今夜大量玩家跪在微软门口，他们手上举着“救救魔兽”“救救星际”“救救守望”“风暴要火”……最后只有一位举着“暗黑不朽上线”的玩家被保安拖走了，因为微软没有手机。" class="headerlink" title="🤷‍♂️ 今夜大量玩家跪在微软门口，他们手上举着“救救魔兽”“救救星际”“救救守望”“风暴要火”……最后只有一位举着“暗黑不朽上线”的玩家被保安拖走了，因为微软没有手机。"></a>🤷‍♂️ 今夜大量玩家跪在微软门口，他们手上举着“救救魔兽”“救救星际”“救救守望”“风暴要火”……最后只有一位举着“暗黑不朽上线”的玩家被保安拖走了，因为微软没有手机。</h3><p>虽然微软没有手机，但是现在他们有糖果传奇了<br>想想 Windows 11 刚上线不久的 WSA，所以这也在你的计划之中吗阿软！</p>
<h3 id="😉-这波啊，利好元宇宙"><a href="#😉-这波啊，利好元宇宙" class="headerlink" title="😉 这波啊，利好元宇宙"></a>😉 这波啊，利好元宇宙</h3><p>请问核聚变和元宇宙的共同点是什么：<br>永远离我们还有五十年~</p>
<h3 id="最后，救救-Wow！"><a href="#最后，救救-Wow！" class="headerlink" title="最后，救救 Wow！"></a>最后，救救 Wow！</h3></div><div><ul class="info"><li>2022-01-19</li><li><a href="/tags/life/">#life</a></li></ul></div></div><div class="entry"><div class="title"><a href="/post/submarine-at-night/">夜晚的潜水艇-陈春成</a></div><div class="content"><img src="./images/submarine-at-night.jpg" width="50%" height="50%" title="夜晚的潜水艇-陈春成">

<h3 id="夜晚的潜水艇-陈春成"><a href="#夜晚的潜水艇-陈春成" class="headerlink" title="夜晚的潜水艇-陈春成"></a>夜晚的潜水艇-陈春成</h3><p>对我而言，这是一本难得的能带来纯粹的愉悦阅读体验的书了。</p>
<p>阅读这本书，灵魂好像被塞进一艘参杂着博尔赫斯的诗句、古老深山中炼丹炉的烟气、苏联红砖房里的单簧管、漂浮着纤毫毕现的隐秘心绪的潜水艇，在斑驳静谧的天空、大地和海底游弋。</p>
<p>放下书本，灵魂抽离而出，从防盗窗的空隙，钻回钢铁水泥的躯壳。<br>但至少，在某一个夜晚，有一艘蓝色的潜水艇，和一段奇异而愉悦的旅程。<br><br/></p>
<blockquote>
<p style="font-size:13px;">
p.s. <br/>
出于喜欢和 <del>装一把</del> 的心态（搞不好后者居多😅），在朋友圈里安利了这本书。<br/>
一个朋友问我缘由，我说因为……好看，朋友玩笑表示毫无说服力。<br/><br/>
在我看来读书是一件很个人的事情，你无法像吃药那样通过疗效来证明它的有效性。<br/>
何况先入为主的读后感，对旁人很难说有什么用处。<br/>
用俗套但有用的话来说，和书的相遇无非是缘 <del>份一道桥</del>。<br/>
这只是一个契机，也许错过这次安利，终会有另一次偶遇让你看到它；<br/>
也许最后你也不会看或者不喜欢这本书。<br/><br/>
椋鸟不一定会找到属于自己的灰烬之歌。<br/>
对社会动物来说，生活大概率并不会因此有什么影响。<br/><br/>
那么，补上这篇无用的 <del>算不上理由的理由</del> 读后感，送给这个朋友吧😂<br/>
</p></blockquote>
</div><div><ul class="info"><li>2021-09-05</li><li><a href="/tags/life/">#life</a></li><li><a href="/tags/reading/">#reading</a></li></ul></div></div><div class="entry"><div class="title"><a href="/post/La-Peste/">鼠疫-加缪</a></div><div class="content"><h3 id="一点介绍"><a href="#一点介绍" class="headerlink" title="一点介绍"></a>一点介绍</h3><p>一个关于鼠疫爆发下，形形色色人们展现出的绝望、贪婪、疯狂，以及勇气和良知的故事。</p>
<h3 id="关于作品"><a href="#关于作品" class="headerlink" title="关于作品"></a>关于作品</h3><p>我看的这个版本，表述有点拖沓，缺乏一点文学上的趣味性。<br>不知道是译者的缘故还是原文如此。当然，不影响整个作品的光芒。</p>
<p>向来对外国人名的“脸盲”，对这些国外作品往往很难沉下心来品味。<br>但即使忽略具体行文，单纯去看整个故事，依然能感受到那种力透纸背的沉重。</p>
<p>习惯了文学作品中的“装腔作势”，才更能察觉到荒诞中的真实、中性和理智。</p>
<h3 id="一点感想"><a href="#一点感想" class="headerlink" title="一点感想"></a>一点感想</h3><p>困境下的贪婪与疯狂，勇气与良知，永远存在，重复上演。</p>
<p>不管困境来源于鼠疫、法西斯还是病毒。<br>不管在世界上的哪一个角落。</p>
</div><div><ul class="info"><li>2021-05-16</li><li><a href="/tags/life/">#life</a></li><li><a href="/tags/reading/">#reading</a></li></ul></div></div><div class="entry"><div class="title"><a href="/post/open-git-repository-with-browser-in-powershell/">Open git repository with browser in powershell</a></div><div class="content"><p>最近沉迷于 vscode 和 powershell 不能自拔，真的是太好用了~<br>顺便撸了一个小功能，用来直接在 powershell 中用浏览器打开对应 git repository 的地址</p>
<p>食用方法：</p>
<ul>
<li><p>在 powershell 中输入 <code>code $PROFILE</code> 来编辑 profile (或者你也可以使用其他的编辑器~</p>
</li>
<li><p>将以下内容添加到 profile 文件结尾并保存</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Open-GitWeb</span></span> &#123;</span><br><span class="line">    <span class="variable">$r</span> = git remote <span class="literal">-v</span> | <span class="built_in">Select-String</span> <span class="literal">-Pattern</span> <span class="string">&quot;(https:\/\/|git@)(?&lt;git&gt;.*)\.git&quot;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$r</span>.Matches.Length <span class="operator">-gt</span> <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable">$t</span> = <span class="string">&quot;https://&quot;</span> + (<span class="variable">$r</span>.Matches[<span class="number">0</span>].Groups |</span><br><span class="line">            <span class="built_in">Where-Object</span> &#123;<span class="variable">$_</span>.Name <span class="operator">-eq</span> <span class="string">&quot;git&quot;</span>&#125;).Value.Replace(<span class="string">&quot;:&quot;</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="string">&quot;gh: openning &quot;</span>,<span class="variable">$t</span>,<span class="string">&quot;...&quot;</span> <span class="literal">-ForegroundColor</span> <span class="string">&quot;green&quot;</span></span><br><span class="line">        <span class="built_in">Start-Process</span> <span class="variable">$t</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">Write-Host</span> <span class="string">&quot;gh: not a git repository or origin not set correctly.&quot;</span> <span class="literal">-ForegroundColor</span> <span class="string">&quot;red&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Set-Alias</span> gh <span class="built_in">Open-GitWeb</span></span><br></pre></td></tr></table></figure>

<p>也可以从这个 <a href="https://gist.github.com/caoyue/c2e916f71e521180628bd26542edec2a" target="_blank">gist</a> 地址获取最新版本</p>
</li>
<li><p>在 powershell 中输入 <code>. $PROFILE</code> 刷新配置文件（类似于 bash 的 source)</p>
</li>
<li><p>done! 在 git repository 目录下输入 <code>gh</code> 就可以打开对应的 url 了</p>
</li>
</ul>
</div><div><ul class="info"><li>2017-06-22</li><li><a href="/tags/project/">#project</a></li><li><a href="/tags/powershell/">#powershell</a></li></ul></div></div><div class="entry"><div class="title"><a href="/post/asp-net-mvc-htmlhelper/">一个 ASP.NET MVC HtmlHelper 的 tricks</a></div><div class="content"><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>先看下面一个简单的 <code>ASP.NET MVC 5</code> 的 demo：</p>
<ul>
<li><p>model</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestModel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;<span class="built_in">int</span>&gt; Ints &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>controller</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ActionResult <span class="title">Index</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> testModel = <span class="keyword">new</span> TestModel();</span><br><span class="line">    <span class="keyword">return</span> View(testModel);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">ActionName(<span class="meta-string">&quot;Index&quot;</span>), HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> ActionResult <span class="title">Post</span>(<span class="params">TestModel testModel</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> View(testModel);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>view</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@model Test.Controllers.TestModel</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">&quot;@Url.Action(&quot;</span>Index<span class="string">&quot;)&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    @for (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        @Html.TextBoxFor(model =&gt; model.Ints[i])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> <span class="keyword">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>有没有看出什么问题？<br/><br><code>View</code> 里面的</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@for (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Html.TextBoxFor(model =&gt; model.Ints[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>Model.Ints</code> 并没有初始化的情况下被使用了。</p>
<p>正常情况下可能会这么写：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@&#123;</span><br><span class="line">    <span class="keyword">if</span> (Model.Ints == <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Model.Ints = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; Model.Ints.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        @Html.TextBoxFor(model =&gt; model.Ints[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们需要 10 个 <code>input</code>，可能还得费心给 <code>Model.Ints</code> 初始化并添加 10 个 元素。</p>
<p>然而前面的写法真的会报错吗？<br/><br>其实并不会，it works well.</p>
<p>为什么呢？ <code>@Html.TextBoxFor(model =&gt; model.Ints[i])</code> 在 <code>Model.Ints</code> 并未初始化的时候就使用了，那么应该会抛出异常才对？</p>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>那么，我们来看看为什么没有报错。<br>这就要从源代码上找原因。</p>
<p>幸好，ASP.NET MVC 已经在 Github 上开源了，地址在<a target="_blank" rel="noopener" href="https://github.com/ASP-NET-MVC/aspnetwebstack">这里</a></p>
<ul>
<li><p>我们很容易根据 namespace 找到 <code>Html.TextBoxFor</code> 的实现，参考 <a target="_blank" rel="noopener" href="https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/Html/InputExtensions.cs#L425">https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/Html/InputExtensions.cs#L425</a></p>
</li>
<li><p>简略的说，根据方法签名追踪，可以找到 <code>InputHelper</code> 方法，即<a target="_blank" rel="noopener" href="https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/Html/InputExtensions.cs#L483">https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/Html/InputExtensions.cs#L483</a></p>
</li>
<li><p>重点在这一段：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> attemptedValue = (<span class="built_in">string</span>)htmlHelper</span><br><span class="line">    .GetModelStateValue(fullName, <span class="keyword">typeof</span>(<span class="built_in">string</span>));</span><br><span class="line">tagBuilder.MergeAttribute(<span class="string">&quot;value&quot;</span>, attemptedValue ?? ((useViewData)</span><br><span class="line">    ? htmlHelper.EvalString(fullName, format)</span><br><span class="line">    : valueParameter), isExplicitValue);</span><br></pre></td></tr></table></figure>

<p>如果要报错，那么应该报错在 <code>htmlHelper.GetModelStateValue</code>，因为很明显这是获取 <code>Model.Ints[i]</code> 的值的地方</p>
</li>
<li><p>继续找到 <code>HtmlHelper.GetModelStateValue</code> 方法，即 <a target="_blank" rel="noopener" href="https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/HtmlHelper.cs#L391">https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/HtmlHelper.cs#L391</a></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">internal</span> <span class="built_in">object</span> <span class="title">GetModelStateValue</span>(<span class="params"><span class="built_in">string</span> key, Type destinationType</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    ModelState modelState;</span><br><span class="line">    <span class="keyword">if</span> (ViewData.ModelState.TryGetValue(key, <span class="keyword">out</span> modelState))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (modelState.Value != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> modelState.Value.ConvertTo(destinationType, <span class="literal">null</span> <span class="comment">/* culture */</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重点就在于 <code>ViewData.ModelState.TryGetValue</code> 了，显然 <code>ModelState</code> 主结构是一个 <code>Dictionary</code> 来存储所有的值，这个想必大部分人都知道，所以我们绕了一圈最终找到了这里<br>也就是说，实际上是通过 <code>Dictionary.TryGetValue(key, out value)</code> 这样的形式来获取对应的值<br>具体到我们的问题，即 <code>i == 0</code> 时，在 <code>ModelState</code> 中寻找 <code>key == &quot;Ints[0]&quot;</code> 的值，当然，其值为 null 并且并不会报错</p>
</li>
</ul>
<p>所以整个流程中并不会因为 <code>Model.Ints</code> 未初始化而报错，因为 <code>Html.TextBoxFor(model =&gt; model.Ints[i])</code> 并不是通过直接访问而是从 expression 数据结构和 ModelState 数据绑定中取值。虽然这背后机制并不复杂，但是这个问题突然冒出来的时候，没有完整看过这部分实现，我也并没有想到这其中的关联。</p>
<p>最后，<strong>在使用之前初始化一定是一个好习惯！</strong></p>
<h3 id="附送"><a href="#附送" class="headerlink" title="附送"></a>附送</h3><p>其实比起看源码，通过 Visual Studio 来 debug 可能更方便。</p>
<p>那么步骤如下：</p>
<ul>
<li>找到 Tool -&gt; Options -&gt; Debugging -&gt; General</li>
<li>Uncheck <code>Enable Just My Code</code></li>
<li>Check <code>Enable Source Server Support</code></li>
<li>转到 Tool -&gt; Options -&gt; Debugging -&gt; Symbols</li>
<li>Check <code>Microsoft Symbol Servers</code></li>
<li>Add <code>http://referencesource.microsoft.com/symbols</code></li>
<li>Add <code>http://msdl.microsoft.com/download/symbols</code></li>
<li>Add <code>http://srv.symbolsource.org/pdb/Public</code></li>
<li>我也不知道哪个 symbol server 对你有效，所以就都加上吧~</li>
<li>如果你只需要一部分的 modules，可以选择 <code>Only specified modules</code>，比如添加 <code>System.Web.Mvc.dll</code></li>
</ul>
<p>接下来进入调试时，只要右键在当前断点上选择 <code>Step Into Specific</code> 就可以选择进入调试源码了~</p>
</div><div><ul class="info"><li>2017-05-30</li><li><a href="/tags/programming/">#programming</a></li></ul></div></div><div class="entry"><div class="title"><a href="/post/html-details/">写模板时的一些细节</a></div><div class="content"><p>最近从 farbox 迁移到了 bitcron，由于 bitcron 不再支持 html 的模板，只好用 jade 重写了一次<br>顺便整理了下之前写这个模板时碰到的一些细节，也许用得上吧</p>
<h3 id="lang"><a href="#lang" class="headerlink" title="lang"></a>lang</h3><p>国内很多网站都是不写这个 lang 属性的，比如 baidu。 而大部分国外网站都会写，Twitter 甚至为每一条推文都加上了 lang 属性<br>那么写上 lang 属性有什么意义呢？顾名思义，lang 属性声明了内容的语言。更详细的来说，比如:</p>
<ul>
<li><p>浏览器可以根据 <code>lang=en</code> 知道当前网页是英文，于是可以问你是否需要开启翻译功能</p>
</li>
<li><p>Chrome 在版本 21 之后，开始根据 <code>lang</code> 属性来应用不同的默认字体。这意味着你可以为英语页面和中文、日文等页面设置不同的默认字体<br/><br>这个选项没有出现在默认设置里，你可以使用这个 Chrome 扩展来设置：<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/advanced-font-settings/caclkomlalccbpcdllchkeecicepbmbm">Advanced Font Settings</a></p>
</li>
<li><p>页面的 lang 属性会影响字体的显示<br>比如 <code>思源黑体</code> 中同时包含了中文字体和日文字体，我们知道日文中一部分汉字是相同的，为了节省空间，所以它们被放在了“同一个位置”上<br/><br>然而即使是同样的字，也可能在字形上存在不同，比如，如果你安装了思源黑体，那么下面同样的字<br> <span lang="jp" style="font-family:'Source Han Sans';font-size:25px;">门类</span> 和 <span lang="zh-Hans" style="font-family:'Source Han Sans';font-size:25px;">门类</span></p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">lang</span>=<span class="string">&quot;ja&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-family:&#x27;Source Han Sans&#x27;&quot;</span>&gt;</span>门类<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">lang</span>=<span class="string">&quot;zh-Hans&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-family:&#x27;Source Han Sans&#x27;&quot;</span>&gt;</span>门类<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

显示出来的字形是不一样的
另外，由于中文字体 fallback 的关系，`lang=en` 下显示的是 `lang=ja` 的字形，所以，如果发现网页显示的字形很奇怪，那么看看 lang 属性有没有正确的设置吧~
可以参考[这里](https://www.w3schools.com/tags/ref_language_codes.asp)来决定选择用哪个 Language Code
</code></pre>
</li>
</ul>
<h3 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h3><ul>
<li><p>charset<br>千万不要忘记 <code>charset</code> 设置，否则可能会出现莫名其妙的乱码<br>一般来说是这样设置的：</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html;charset=utf-8&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>viewport<br>这个就不多说了，如果做了自适应的话，应该都不会忘记这个<br/><br>可以参考 <a target="_blank" rel="noopener" href="https://www.w3schools.com/css/css_rwd_viewport.asp">https://www.w3schools.com/css/css_rwd_viewport.asp</a></p>
</li>
<li><p>web app icon<br>在移动设备上，除了将网站收藏为书签外，现在还有更多快捷访问的方式，比如，固定到桌面等等。所以，相对于 favicon，我们有了更多需要设置的 icon<br/><br>比如为 iOS 设置放到主屏幕上的图标：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;apple-touch-iphone.png&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;72x72&quot;</span> <span class="attr">href</span>=<span class="string">&quot;apple-touch-ipad.png&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sizes</span>=<span class="string">&quot;114x114&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;apple-touch-iphone4.png&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">sizes</span>=<span class="string">&quot;144x144&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;apple-touch-ipad-retina.png&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<p>相应的还有 Android，Windows 等等，所以你可能会需要<a href="(https://realfavicongenerator.net/)">这个网站</a>，一次生成支持所有平台的 html。</p>
</li>
</ul>
<h3 id="待续"><a href="#待续" class="headerlink" title="待续~"></a>待续~</h3></div><div><ul class="info"><li>2017-05-27</li><li><a href="/tags/programming/">#programming</a></li></ul></div></div><div class="pager">   <a class="next" href="/page/2/">Next</a></div></div><div class="footer"><div></div>©2021<a href="https://blog.caoyue.me"> 且听疯吟</a>. designed by<a href="https://caoyue.me" target="_blank"> caoyue</a>. powered by<a href="https://hexo.io/" target="_blank"> hexo</a></div><script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "1a24e73fd4284bfa8b43ecf5a5c2c100"}'></script>
</div></body></html>